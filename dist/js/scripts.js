document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav"),e=(M.Sidenav.init(e,{edge:"left"}),document.querySelectorAll(".dropdown-trigger")),e=(M.Dropdown.init(e,{aligment:"left",container:"dropdown-navbar",coverTrigger:!1,constrainWidth:!1}),document.querySelectorAll(".js-alert").forEach(function(e){e.querySelector(".js-alert-close")?.addEventListener("click",function(){e.style.display="none"}),setTimeout(function(){e.style.display="none"},8e3)}),document.querySelectorAll(".count-char")),e=(M.CharacterCounter.init(e),document.querySelectorAll(".modal")),e=(M.Modal.init(e,{opacity:.5,inDuration:300,outDuration:200,startingTop:"10%",dismissible:!0,preventScrolling:!0}),document.querySelectorAll(".tooltipped")),e=(M.Tooltip.init(e,{position:"right"}),document.querySelectorAll("select")),e=(M.FormSelect.init(e,{container:document.body}),document.querySelectorAll(".datepicker")),t=null,o=new Date,e=(window.expirationDate&&""!==window.expirationDate&&(t=new Date(expirationDate)),M.Datepicker.init(e,{defaultDate:t,setDefaultDate:!0,minDate:o,autoClose:!0,firstDay:1,i18n:{cancel:"Cancelar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysAbbrev:["D","L","M","X","J","V","S"]}}),document.querySelector(".js-init-intro")&&1248<window.innerWidth&&((e=introJs()).setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",doneLabel:"Hecho",showBullets:!1,dontShowAgain:!0,dontShowAgainLabel:"No volver a mostrar",tooltipClass:"customTooltips",highlightClass:"customLayer",steps:[{element:document.querySelector(".js-first-step"),title:"Hola",intro:"¿Todavía no tienes tablones creados? 😱",position:"right"},{element:document.querySelector("#openModalButton"),title:"Crea tu primer tablón!",intro:"Haciendo click en este botón"}]}),e.start()),document.querySelector(".js-init-intro-tasks")&&1248<window.innerWidth&&((t=introJs()).setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",doneLabel:"Hecho",showBullets:!1,dontShowAgain:!0,dontShowAgainLabel:"No volver a mostrar",tooltipClass:"customTooltips",highlightClass:"customLayer",steps:[{element:document.querySelector(".js-not-tasks"),title:"Hola de nuevo",intro:"¿Todavía no tienes tareas creadas? 😱",position:"right"},{element:document.querySelector(".js-create-tasks"),title:"Crea tu primera tarea!",intro:"Es muy sencillo, solo tienes que añadir el título y más tarde podrás añadir información extra."}]}),t.start()),document.querySelector(".js-init-intro-filters")&&1248<window.innerWidth&&((o=introJs()).setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",doneLabel:"Hecho",showBullets:!1,dontShowAgain:!0,dontShowAgainLabel:"No volver a mostrar",tooltipClass:"customTooltips",highlightClass:"customLayer",steps:[{element:document.querySelector(".js-filters-btn"),title:"Ya puedes filtrar tus tareas",intro:"Haz click aquí y podrás ver las tareas que estén a punto de vencer o que cumpleaños tienes pendientes. Entre otro filtros.",position:"left"}]}),o.start()),document.querySelectorAll(".fixed-action-btn")),n=(M.FloatingActionButton.init(e,{direction:"top",hoverEnabled:!1}),document.querySelectorAll(".pushpin")),r=!1;function a(){var e;r||(e=n[n.length-1])&&(e=e.getBoundingClientRect()).top<=window.innerHeight&&0<=e.bottom&&(n.forEach(function(e){var t=e.getAttribute("data-target"),t=document.getElementById(t),o=t.offsetTop,t=t.offsetTop+t.offsetHeight-e.offsetHeight;new M.Pushpin(e,{top:o,bottom:t})}),r=!0)}window.addEventListener("scroll",a),a(),document.getElementById("dropdown-filter")?.addEventListener("click",function(e){var o,n;switch(e.preventDefault(),Array.from(document.querySelectorAll(".js-filter-btn")).forEach(e=>{e.classList.remove("active")}),e.target.getAttribute("data-filter")){case"high":n="high",i.forEach(e=>{var t=e.getAttribute("data-priority");e.style.display=t===n?"block":"none"});break;case"expire_tomorrow":{const r=new Date;i.forEach(e=>{var t=e.getAttribute("data-exp"),o=new Date(t);t&&o<=(t=r,new Date(t.getTime()+864e5))?e.style.display="block":e.style.display="none"})}break;case"not_expire":i.forEach(e=>{var t=e.getAttribute("data-exp");e.style.display=t?"none":"block"});break;case"show_all":i.forEach(e=>{e.style.display="block"});break;case"type":o=e.target.getAttribute("data-type"),i.forEach(e=>{var t=e.getAttribute("data-type");e.style.display="show_all"===o||t===o?"block":"none"})}});const i=Array.from(document.querySelectorAll(".js-task-card"));t=document.querySelectorAll(".js-column"),o=document.querySelectorAll(".js-task");let l=null;function s(){l=this,setTimeout(()=>this.className="invisible",0)}function c(){this.className="item",l=null}function d(e){e.preventDefault()}function u(){this.append(l);var e=this.dataset.status,t=l.dataset.taskid;fetch("../task-planner/controllers/update_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_id:t,status:e})}).then(e=>{e.ok?console.log("Estado de la tarea actualizado correctamente."):console.log("Error al actualizar el estado de la tarea.")}).catch(e=>{console.log("Error en la solicitud: "+e.message)})}o.forEach(e=>{e.addEventListener("dragstart",s),e.addEventListener("dragend",c)}),t.forEach(e=>{e.addEventListener("dragover",d),e.addEventListener("drop",u),new Sortable(e,{group:"shared",animation:150,ghostClass:"transparent"})})});