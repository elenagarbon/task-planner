document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav"),e=(M.Sidenav.init(e,{edge:"left"}),document.querySelectorAll(".dropdown-trigger")),e=(M.Dropdown.init(e,{aligment:"left",container:"dropdown-navbar",coverTrigger:!1,constrainWidth:!1}),document.querySelectorAll(".js-alert").forEach(function(e){e.querySelector(".js-alert-close")?.addEventListener("click",function(){e.style.display="none"}),setTimeout(function(){e.style.display="none"},8e3)}),document.querySelectorAll(".count-char")),e=(M.CharacterCounter.init(e),document.querySelectorAll(".modal")),e=(M.Modal.init(e,{opacity:.5,inDuration:300,outDuration:200,startingTop:"10%",dismissible:!0,preventScrolling:!0}),document.querySelectorAll(".tooltipped")),e=(M.Tooltip.init(e,{position:"right"}),document.querySelectorAll("select")),e=(M.FormSelect.init(e,{container:document.body}),document.querySelectorAll(".datepicker")),t=null,o=new Date;window.expirationDate&&""!==window.expirationDate&&(t=new Date(expirationDate)),M.Datepicker.init(e,{defaultDate:t,setDefaultDate:!0,minDate:o,autoClose:!0,firstDay:1,i18n:{cancel:"Cancelar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysAbbrev:["D","L","M","X","J","V","S"]}});document.querySelector(".js-init-intro")&&introJs().setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",doneLabel:"Hecho",showBullets:!1,dontShowAgain:!0,dontShowAgainLabel:"No volver a mostrar",tooltipClass:"customTooltips",highlightClass:"customLayer",steps:[{element:document.querySelector(".js-first-step"),title:"Hola",intro:"¿Todavía no tienes tablones creados? 😱",position:"right"},{element:document.querySelector("#openModalButton"),title:"Crea tu primer tablón!",intro:"Haciendo click en este botón"}]}).start(),document.querySelector(".js-init-intro-tasks")&&introJs().setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",doneLabel:"Hecho",showBullets:!1,dontShowAgain:!0,dontShowAgainLabel:"No volver a mostrar",tooltipClass:"customTooltips",highlightClass:"customLayer",steps:[{element:document.querySelector(".js-not-tasks"),title:"Hola de nuevo",intro:"¿Todavía no tienes tareas creadas? 😱",position:"right"},{element:document.querySelector(".js-create-tasks"),title:"Crea tu primera tarea!",intro:"Es muy sencillo, solo tienes que añadir el título y más tarde podrás añadir información extra."}]}).start()}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".pushpin"),o=!1;function e(){var e;o||(e=t[t.length-1])&&(e=e.getBoundingClientRect()).top<=window.innerHeight&&0<=e.bottom&&(t.forEach(function(e){var t=e.getAttribute("data-target"),t=document.getElementById(t),o=t.offsetTop,t=t.offsetTop+t.offsetHeight-e.offsetHeight;new M.Pushpin(e,{top:o,bottom:t})}),o=!0)}window.addEventListener("scroll",e),e(),document.getElementById("dropdown-filter")?.addEventListener("click",function(e){var o;switch(e.preventDefault(),Array.from(document.querySelectorAll(".js-filter-btn")).forEach(e=>{e.classList.remove("active")}),e.target.getAttribute("data-filter")){case"high":o="high",Array.from(document.querySelectorAll(".js-task-card")).forEach(e=>{var t=e.getAttribute("data-priority");e.style.display=t===o?"block":"none"});break;case"expire_tomorrow":{const t=Array.from(document.querySelectorAll(".js-task-card")),r=new Date;t.forEach(e=>{var t=e.getAttribute("data-exp"),o=new Date(t);t&&o<=(t=r,new Date(t.getTime()+864e5))?e.style.display="block":e.style.display="none"})}break;case"not_expire":Array.from(document.querySelectorAll(".js-task-card")).forEach(e=>{var t=e.getAttribute("data-exp");e.style.display=t?"none":"block"});break;case"show_all":Array.from(document.querySelectorAll(".js-task-card")).forEach(e=>{e.style.display="block"})}e.target.classList.add("active")});var r=document.querySelectorAll(".js-column"),a=document.querySelectorAll(".js-task");let n=null;function i(){n=this,setTimeout(()=>this.className="invisible",0)}function l(){this.className="item",n=null}function s(e){e.preventDefault()}function c(){this.append(n);var e=this.dataset.status,t=n.dataset.taskid;fetch("http://localhost/web/task-planner/controllers/update_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_id:t,status:e})}).then(e=>{e.ok?console.log("Estado de la tarea actualizado correctamente."):console.log("Error al actualizar el estado de la tarea.")}).catch(e=>{console.log("Error en la solicitud: "+e.message)})}a.forEach(e=>{e.addEventListener("dragstart",i),e.addEventListener("dragend",l)}),r.forEach(e=>{e.addEventListener("dragover",s),e.addEventListener("drop",c),new Sortable(e,{group:"shared",animation:150,ghostClass:"transparent"})})});